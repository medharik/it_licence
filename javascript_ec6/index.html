<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
<link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container-fluid ">
        <div class="row plein">
            <div class="col-md-6 border m-md-auto shadow p-2 rounded">
                <form action="https://www.google.com" id="mon_form">
                    <div class="mb-2"><label for="email" class="form-label">Email</label>
                        <input type="text" class="form-control" id="email">
                        <span class="form-text text-danger" ></span>
                    </div>
                    <div><label for="passe" class="form-label">Mot de passe </label>
                        <input type="password" class="form-control" id="passe">
                        <span></span>
                    </div>
                    <div class="mb-2"><label for="conf" class="form-label">Confirmation du mot de passe </label>
                        <input type="password" class="form-control" id="conf">
                        <span></span>
                    </div>
                    <div class="text-center mb-2" >
                        <button type="button" class="btn btn-primary col-md-6" onclick="valider()">
                            Vaider  
                        </button>
                    </div>
                </form>
            </div>
        </div>
        
    </div>
    <script>
        let erreur=false;
        let  valider_email =  () =>  { //arrow function
            //recuperer chaque input
            let  mail= document.getElementById('email');
            let s=     document.querySelector('#email+span');
            // REGEX : microlangage (expression) traittant la syntaxe des chaines de caracteres 
            let modele=/^\w{1,}@itsup\.ma$/;
            if (!modele.test(mail.value)) {
                //  alert("email non valide")
                s.innerHTML="Email non valide";
                console.log('span',s);
                erreur=true;
            }else{
                s.innerHTML="";
            }
        }
        let  valider_passe =  () =>  { //arrow function
            //recuperer chaque input
            let  passe= document.getElementById('passe');
            let s=     document.querySelector('#passe+span');
            // REGEX : microlangage (expression) traittant la syntaxe des chaines de caracteres 
            let modele=/^itsup\d{4}$/;
            if (!modele.test(passe.value)) {
                //  alert("email non valide")
                s.innerHTML="Mot de passe  non valide";
                erreur=true;
                console.log('span',s);
            }else{
                s.innerHTML="";
            }
     

        }
        let  valider_conf =  () =>  { //arrow function
            //recuperer chaque input
            let  passe= document.getElementById('passe');
            let  conf= document.getElementById('conf');
            let s=     document.querySelector('#conf+span');
            // REGEX : microlangage (expression) traittant la syntaxe des chaines de caracteres 
            if (conf.value!=passe.value) {
                erreur=true;
                //  alert("email non valide")
                s.innerHTML="les 2 Mots de passe ne correspondent pas ";
                console.log('span',s);
            }else{
                s.innerHTML="";
            }
     

        }

        function valider(){
            valider_passe();
            valider_email();
            valider_conf();
            if(erreur==false)
          document.getElementById('mon_form').submit();
          else 
          erreur=false

          console.log('erreur est '+erreur);
        }
    </script>
</body>
</html>